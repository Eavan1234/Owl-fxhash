let mult,COLS,Cols,RAND=fxrand(),mode1=fxrand(),mode2=fxrand(),mode3=fxrand(),mode4=fxrand();function setup(){const t=min(windowWidth,windowHeight);createCanvas(t,t),frameRate(.75)}function draw(){COLS=shuffle(COLS),clear(),background(255*mode1,255*mode2,255*mode3),noFill(),stroke(255),rect(30,30,width-60,height-60);const t=.15*min(width,height)*mult,e=.55*width,l=.7*height,i=e-t,n=l-3*t/2,r=.6*width;noStroke(),fill(0),rect(e-.5*r,l,.8*r,20),push(),translate(i,n),owl(t),pop()}function owl(t){ellipseMode(CENTER),rectMode(CORNER),noStroke(),push(),fill(COLS[2]),arc(1.5*t,.7*-t,2.2*t,2.2*t,radians(65),PI),fill(COLS[4]),arc(.5*-t,.7*-t,2.2*t,2.2*t,0,radians(115)),fill(COLS[3]),drawRectTile(.5*-t,1.5*-t,t,t,int(3*mode1)),fill(COLS[2]),drawRectTile(.5*t,1.5*-t,t,t,int(3*mode2)),fill(COLS[1]),drawRectTile(.5*-t,.5*-t,t,t,int(3*mode3)),fill(COLS[4]),drawRectTile(.5*t,.5*-t,t,t,int(3*mode4)),fill(COLS[2]),drawArcUnit(.5*t,.5*t,2*t,2*t,0,PI),fill(COLS[3]),drawArcUnit(.5*t,.5*t,2*t,2*t,0,.5*PI),push(),pop(),fill(COLS[3]),triangle(.5*t,1.5*t,0,2*t,t,2*t),fill(255),ellipse(.1*t,1.5*-t,.8*t,.8*t),ellipse(.9*t,1.5*-t,.8*t,.8*t),fill(20),ellipse(.1*t,1.5*-t,.6*t,.6*t),ellipse(.9*t,1.5*-t,.6*t,.6*t),fill(255),ellipse(.3*t,1.5*-t,.2*t,.2*t),ellipse(.7*t,1.5*-t,.2*t,.2*t),fill(COLS[1]),triangle(.5*t,1.8*-t,.5*-t,2.2*-t,1.5*t,2.2*-t),fill(20),rect(.2*-t,2*-t,.6*t,.1*t),rect(.6*t,2*-t,.6*t,.1*t),fill(255),triangle(.5*t,1.1*-t,.4*t,.8*-t,.6*t,.8*-t),pop()}function drawArcUnit(t,e,l,i,n,r){const o=shuffle(COLS);if(ellipseMode(CENTER),push(),translate(t,e),noStroke(),fill(o[int(4*RAND)]),arc(0,0,l,i,n,r),push(),drawingContext.clip(),mult>.6)for(let t=0;t<3;t++)fill(o[t]),ellipse(0,0,l/3*(3-t),i/3*(3-t));else{const t=mult>.5;for(let e=0;e<6;e++)fill(o[e%o.length]),t?rect(-l/2,-i/2+i/6*e,l,i/6+1):rect(-l/2+l/6*e,-i/2,l/6+1,i)}pop(),pop()}RAND<.1?(mult=RAND+.3,COLS=["#fe938c","#f7c548","#7b9e87","#a0c1d1","#5d576b"]):RAND>=.1&&RAND<=.2?(mult=5*RAND,COLS=["#f4f1de","#e07a5f","#3d405b","#81b29a","#f2cc8f"]):RAND>=.2&&RAND<=.3?(mult=3*RAND,COLS=["#8ecae6","#219ebc","#023047","#ffb703","#fb8500"]):RAND>=.3&&RAND<=.6?(mult=RAND,COLS=["#e63946","#f1faee","#a8dadc","#457b9d","#1d3557"]):(mult=RAND,COLS=["#4f454f","#696172","#807689","#ca91a9","#ddb8c7"]),Cols=COLS.toString();const UNITFUNCS=[checkPattern,triPattern,curvePattern,stripePattern];function drawRectTile(t,e,l,i,n){UNITFUNCS[n](t,e,l,i,shuffle(COLS))}function checkPattern(t,e,l,i,n){noStroke(),push(),translate(t,e),fill(n[int(4*RAND)]),rect(0,0,l,i),push(),drawingContext.clip();const r=l/3,o=i/3;let f=0;for(let t=0;t<i;t+=o){const e=f%2==0?0:1;for(let i=0;i<l;i+=r)fill(n[0+e]),rect(i,t,r/2,o),fill(n[1-e]),rect(i+r/2,t,r/2,o);f++}pop(),pop()}function triPattern(t,e,l,i,n){noStroke(),push(),translate(t,e),fill(n[int(2*RAND)]),rect(0,0,l,i),push(),drawingContext.clip();const r=l/3,o=i/int(2*RAND+1);let f=0;for(let t=0;t<i;t+=o){const e=f%2==0?0:r/2*0;for(let i=0;i<l;i+=r)fill(n[int(2*RAND+2)]),triangle(i+e,t,i+r+e,t,i+r/2+e,t+o);f++}pop(),pop()}function curvePattern(t,e,l,i,n){min(l,i),fill(n[int(2*RAND)]),rect(t,e,l,i),push(),drawingContext.clip(),translate(t+int(2*mult)*l,e),fill(n[int(2*RAND+2)]),circle(0,0,2*min(l,i)),pop()}function stripePattern(t,e,l,i,n){const r=mult>.5;for(let o=0;o<3;o++)fill(n[o]),r?rect(t,e+i/3*o,l,i/3+1):rect(t+l/3*o,e,l/3+1,i)}